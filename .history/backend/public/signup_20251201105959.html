<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Signup - Sabri Helpage</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: Inter, system-ui, -apple-system; background:#FFF8F0; margin:0; }
    .wrap { max-width: 420px; margin: 60px auto; background:#fff; border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,0.08); padding:24px; }
    h1 { margin:0 0 8px; font-size:20px; }
    p { color:#555; margin:0 0 16px; }
    label { display:block; font-weight:600; margin:12px 0 6px; }
    input { width:100%; padding:10px 12px; border:1px solid #ddd; border-radius:8px; }
    button { width:100%; padding:12px; border:none; border-radius:8px; background:#FF8F5C; color:#fff; font-weight:700; cursor:pointer; }
    button:hover { background:#FFA476; }
    .note { text-align:center; margin-top:12px; }
    a { color:#FF7A42; text-decoration:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <nav aria-label="Breadcrumb" style="margin-bottom:12px; font-size:13px;">
      <a href="/" style="color:#2C3E50; text-decoration:none;">API Home</a>
      <span style="color:#999; margin:0 6px;">/</span>
      <a href="/admin" style="color:#2C3E50; text-decoration:none;">Admin</a>
      <span style="color:#999; margin:0 6px;">/</span>
      <span style="color:#555;">Signup</span>
    </nav>
    <h1>Create Admin Account</h1>
    <p>Sign up to access the Admin Panel.</p>
    <form id="signup-form">
      <label for="name">Name</label>
      <input id="name" name="name" type="text" required />
      <label for="email">Email</label>
      <input id="email" name="email" type="email" required />
      <label for="password">Password</label>
      <input id="password" name="password" type="password" required />
      <button type="submit">Sign Up</button>
    </form>
    <div class="note">Already have an account? <a href="/admin">Log in</a></div>
  </div>
  <script>
    const form = document.getElementById('signup-form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const body = {
        name: form.name.value.trim(),
        email: form.email.value.trim(),
        password: form.password.value,
      };
      try {
        const res = await fetch('/admin/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        });
        const data = await res.json();
        if (!res.ok || !data.success) {
          alert(data.error || 'Signup failed');
          return;
        }
        window.location.href = data.redirectUrl || '/admin';
      } catch (err) {
        alert(err?.message || 'Network error');
      }
    });
  </script>
</body>
</html>
